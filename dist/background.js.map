{"version":3,"file":"background.js","sources":["../src/background/index.ts"],"sourcesContent":["import { Result } from \"../shared\";\n\nexport class BackGround {\n    private result: Result;\n\n    constructor() {\n        chrome.extension.onRequest.addListener(\n            (\n                request: any, \n                sender: chrome.runtime.MessageSender, \n                sendResponse: (response: any) => void\n            ) => {\n                this.onRequest(request, sender, sendResponse)\n            }\n        );\n\n        chrome.tabs.onSelectionChanged.addListener((id, obj) => {\n            chrome.tabs.sendRequest(id, { ask: \"getResult\" }, (response) => {\n                this.result = response.result;\n            });\n        });\n    }\n\n    onRequest(request: any, sender: chrome.runtime.MessageSender, sendResponse: (response: any) => void) {\n        if (request.ask == \"p2plinks\") {\n            this.showPopup(request.result, sender.tab.id);\n        }\n    }\n\n    showPopup = function(result, id) {\n        this.result = result;\n        chrome.pageAction.show(id);\n    };\n}\n\nnew BackGround();\n"],"names":[],"mappings":";;;;;;;QAKI;YAAA,iBAgBC;YAQD,cAAS,GAAG,UAAS,MAAM,EAAE,EAAE;gBAC3B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;gBACrB,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAC9B,CAAC;YA1BE,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,WAAW,CAClC,UACI,OAAY,EACZ,MAAoC,EACpC,YAAqC;gBAErC,KAAI,CAAC,SAAS,CAAC,OAAO,EAAE,MAAM,EAAE,YAAY,CAAC,CAAA;aAChD,CACJ,CAAC;YAEF,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,UAAC,EAAE,EAAE,GAAG;gBAC/C,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,WAAW,EAAE,EAAE,UAAC,QAAQ;oBACvD,KAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;iBACjC,CAAC,CAAC;aACN,CAAC,CAAC;SACN;QAED,8BAAS,GAAT,UAAU,OAAY,EAAE,MAAoC,EAAE,YAAqC;YAC/F,IAAI,OAAO,CAAC,GAAG,IAAI,UAAU,EAAE;gBAC3B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;aACjD;SACJ;QAML,iBAAC;IAAD,CAAC,IAAA;IAED,IAAI,UAAU,EAAE,CAAC;;;;;;;;;;;;"}